{% extends "base.html" %}

{% block sidebar %}
{% include "includes/sidebar_input.html" %}

<!-- Sidebar Banner -->
{{ sidebar_banner_html | safe }}
{% endblock %}

{% block content %}
<!-- ìš°ì¸¡: ë§Œì„¸ë ¥ ë‹¬ë ¥ -->
<div class="result-container">
    <!-- ì»¨í…ì¸  ìƒë‹¨ ë°°ë„ˆ -->


    <div class="glass-card">
        <div class="section-header">
            <span>ğŸ“…</span> ë§Œì„¸ë ¥
        </div>

        <!-- ë…„ì›” ì„ íƒ ë° ë„¤ë¹„ê²Œì´ì…˜ -->
        <div
            style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 0.5rem; margin-bottom: 1.5rem; align-items: center;">
            <button id="today-btn"
                style="padding: 0.75rem; background: var(--gold-gradient); border: none; border-radius: 8px; color: var(--bg-dark); font-weight: bold; cursor: pointer;">
                ì˜¤ëŠ˜
            </button>

            <div style="display: grid; grid-template-columns: 1fr 3fr 1fr; gap: 0.5rem; align-items: center;">
                <button id="prev-month-btn"
                    style="padding: 0.75rem; background: rgba(212,175,55,0.2); border: 1px solid var(--border-gold); border-radius: 8px; color: var(--gold-primary); font-weight: bold; cursor: pointer;">
                    â—€
                </button>
                <div id="year-month-display"
                    style="text-align: center; font-size: 1.2em; font-weight: bold; color: #D4AF37; padding: 0.5rem;">
                    {{ year }}.{{ "%02d"|format(month) }}
                </div>
                <button id="next-month-btn"
                    style="padding: 0.75rem; background: rgba(212,175,55,0.2); border: 1px solid var(--border-gold); border-radius: 8px; color: var(--gold-primary); font-weight: bold; cursor: pointer;">
                    â–¶
                </button>
            </div>

            <div></div>
        </div>

        <!-- ì˜µì…˜ ì²´í¬ë°•ìŠ¤ -->
        <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
            <label style="display: flex; align-items: center; color: var(--text-primary);">
                <input type="checkbox" id="show-lunar" checked style="margin-right: 0.5rem;">
                ìŒë ¥
            </label>
            <label style="display: flex; align-items: center; color: var(--text-primary);">
                <input type="checkbox" id="show-ganji" checked style="margin-right: 0.5rem;">
                ê°„ì§€(å¹²æ”¯)
            </label>
        </div>

        <!-- ë‹¬ë ¥ í‘œì‹œ ì˜ì—­ -->
        <div id="calendar-container">
            <!-- ë‹¬ë ¥ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
        </div>

        <!-- ê³µìœ í•˜ê¸° ë²„íŠ¼ ì˜ì—­ -->
        <div id="manse-share" style="display: none; margin-top: 1.5rem;">
            {% include "includes/share_buttons.html" %}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // í˜ì´ì§€ ì´ˆê¸° ì„¤ì •
    window.MANSE_CONFIG = {
        initialYear: {{ year }},
    initialMonth: { { month } }
    };

    // ì‚¬ì£¼ ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œ ë‹¬ë ¥ ë¦¬ë¡œë“œ
    document.addEventListener('sajuUpdated', function (e) {
        if (e.detail.success) {
            loadCalendar();
        }
    });

    // ìŠ¤í”¼ë„ˆ ì• ë‹ˆë©”ì´ì…˜ (ì´ë¯¸ app.jsì— ìˆê±°ë‚˜ ìŠ¤íƒ€ì¼ë¡œ ì •ì˜ëœ ê²½ìš° ì¤‘ë³µì¼ ìˆ˜ ìˆìœ¼ë‚˜ ì•ˆì „ì„ ìœ„í•´ ìœ ì§€)
    // í•˜ì§€ë§Œ app.jsë‚˜ ë‹¤ë¥¸ ê³³ì— ì „ì—­ìœ¼ë¡œ ìˆë‹¤ë©´ ì œê±° ê°€ëŠ¥. ì—¬ê¸°ì„  ì¼ë‹¨ ë‘¡ë‹ˆë‹¤.
</script>
<script src="/static/js/pages/manse.js?v=1.1"></script>
{% endblock %}