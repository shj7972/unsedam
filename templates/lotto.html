{% extends "base.html" %}

{% block sidebar %}
{% include "includes/sidebar_input.html" %}

<!-- Sidebar Banner -->
{{ sidebar_banner_html | safe }}
{% endblock %}

{% block content %}
<!-- 우측: 로또 번호 생성 및 결과 -->
<div class="result-container">
    <!-- 컨텐츠 상단 배너 -->


    <div class="glass-card">
        <div class="section-header">
            <span>🎱</span> 로또 번호 추천
        </div>

        <!-- 안내 메시지 -->
        <div style="padding: 1rem; background: rgba(212,175,55,0.1); border-radius: 8px; margin-bottom: 1.5rem;">
            <p style="color: #E2E8F0; line-height: 1.8;">
                행운의 로또 번호를 추천해드립니다. 다양한 방식으로 번호를 생성할 수 있습니다.
                <strong style="color: #D4AF37;">참고:</strong> 모든 번호는 참고용이며, 실제 당첨을 보장하지 않습니다.
            </p>
        </div>

        <!-- 생성 방식 선택 -->
        <h3 style="color: var(--gold-primary); margin-top: 1.5rem; margin-bottom: 1rem;">🎲 번호 생성 방식</h3>
        <div id="method-descriptions" style="display: none;">
            {
            "완전 랜덤": "1~45번 중 완전히 무작위로 6개의 번호를 선택합니다.",
            "홀짝 균형형": "홀수와 짝수를 균형있게 배분하여 생성합니다. (예: 홀수 3개, 짝수 3개)",
            "고저 분포형": "낮은 번호(1-15), 중간 번호(16-30), 높은 번호(31-45)를 골고루 배분합니다.",
            "연속 번호 포함형": "연속된 번호 1쌍을 포함하여 생성합니다.",
            "합계 조절형": "번호 합계를 100-200 범위로 조절하여 생성합니다.",
            "시간 기반": "현재 시간과 날짜를 기반으로 번호를 생성합니다.",
            "생년월일 기반": "입력하신 생년월일의 숫자를 활용하여 생성합니다.",
            "사주 기반": "사주 정보의 간지를 숫자로 변환하여 생성합니다.",
            "행운 숫자 조합": "생일 합산으로 계산한 행운 숫자와 조합하여 생성합니다.",
            "생일 합산 기반": "생년월일의 각 자리수를 합산하여 생성합니다.",
            "사주 오행 기반": "사주의 오행(목화토금수)을 숫자 범위로 변환하여 생성합니다."
            }
        </div>
        <div style="margin-bottom: 1.5rem;">
            <select id="lotto-method"
                style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-gold); border-radius: 8px; background: var(--navy-glass); color: var(--text-primary);">
                <option value="완전 랜덤">완전 랜덤</option>
                <option value="홀짝 균형형">홀짝 균형형</option>
                <option value="고저 분포형">고저 분포형</option>
                <option value="연속 번호 포함형">연속 번호 포함형</option>
                <option value="합계 조절형">합계 조절형</option>
                <option value="시간 기반">시간 기반</option>
                <option value="생년월일 기반">생년월일 기반</option>
                <option value="사주 기반">사주 기반</option>
                <option value="행운 숫자 조합">행운 숫자 조합</option>
                <option value="생일 합산 기반">생일 합산 기반</option>
                <option value="사주 오행 기반">사주 오행 기반</option>
            </select>
            <div id="method-description"
                style="margin-top: 0.5rem; padding: 0.75rem; background: rgba(212,175,55,0.1); border-radius: 8px; color: #A0AEC0; font-size: 0.9em; min-height: 1.5em;">
            </div>
        </div>

        <!-- 사용자 정보 필요 경고 -->
        <div id="user-info-warning"
            style="display: none; padding: 0.75rem; background: rgba(231,76,60,0.1); border: 1px solid rgba(231,76,60,0.3); border-radius: 8px; color: #FCA5A5; margin-bottom: 1rem; font-size: 0.9em;">
            ⚠️ 이 번호 생성 방식을 사용하려면 왼쪽에서 이름과 생년월일을 입력해주세요.
        </div>

        <!-- 생성 세트 수 -->
        <h3 style="color: var(--gold-primary); margin-top: 1.5rem; margin-bottom: 1rem;">📊 생성할 번호 세트 수</h3>
        <div style="margin-bottom: 1.5rem;">
            <input type="range" id="num-sets" min="1" max="10" value="3" style="width: 100%; margin-bottom: 0.5rem;">
            <div style="display: flex; justify-content: space-between; color: #A0AEC0; font-size: 0.9em;">
                <span>1세트</span>
                <span id="num-sets-value" style="color: #D4AF37; font-weight: bold;">3세트</span>
                <span>10세트</span>
            </div>
        </div>

        <!-- 생성 버튼 -->
        <button id="generate-lotto-btn"
            style="width: 100%; padding: 1rem; background: var(--gold-gradient); border: none; border-radius: 8px; color: var(--bg-dark); font-weight: bold; cursor: pointer; font-size: 1rem; margin-bottom: 1.5rem;">
            🎱 번호 생성
        </button>

        <!-- 결과 표시 영역 -->
        <div id="lotto-result-container" style="display: none;"></div>

        <!-- 공유하기 버튼 영역 -->
        <div id="lotto-share" style="display: none;">
            {% include "includes/share_buttons.html" %}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // 페이지 설정
    window.LOTTO_CONFIG = {
        hasUserInfo: {% if processed and birth_date %}true{% else %} false{% endif %}
    };
</script>
<script src="/static/js/pages/lotto.js"></script>
{% endblock %}